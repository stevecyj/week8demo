{"version":3,"file":"js/261.b8b410f4.js","mappings":"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","sources":["webpack://week8demo/./src/libs/api.js","webpack://week8demo/../src/index.ts","webpack://week8demo/./src/libs/emitter.js","webpack://week8demo/./src/views/ProductView.vue","webpack://week8demo/./src/views/ProductView.vue?f743"],"sourcesContent":["import axios from 'axios';\n// import Qs from 'qs';\n\nconst api = process.env.VUE_APP_API;\nconst path = process.env.VUE_APP_PATH;\n\n/*\n|--------------------------------------------------------------------------\n| 前台\n|--------------------------------------------------------------------------\n|\n*/\n\n// products\nexport const apiGetAllProducts = () => axios.get(`${api}/api/${path}/products/all`); // 取得所有產品\nexport const apiGetSingleProduct = (id) => axios.get(`${api}/api/${path}/product/${id}`); // 取得單一產品\n\n// 購物車\nexport const apiGetCart = () => axios.get(`${api}/api/${path}/cart`); // 取得購物車\nexport const apiAddToCart = (data) => axios.post(`${api}/api/${path}/cart`, data); // 加入購物車\n","export type EventType = string | symbol;\n\n// An event handler can take an optional event argument\n// and should not return a value\nexport type Handler<T = unknown> = (event: T) => void;\nexport type WildcardHandler<T = Record<string, unknown>> = (\n\ttype: keyof T,\n\tevent: T[keyof T]\n) => void;\n\n// An array of all currently registered event handlers for a type\nexport type EventHandlerList<T = unknown> = Array<Handler<T>>;\nexport type WildCardEventHandlerList<T = Record<string, unknown>> = Array<WildcardHandler<T>>;\n\n// A map of event types and their corresponding event handlers.\nexport type EventHandlerMap<Events extends Record<EventType, unknown>> = Map<\n\tkeyof Events | '*',\n\tEventHandlerList<Events[keyof Events]> | WildCardEventHandlerList<Events>\n>;\n\nexport interface Emitter<Events extends Record<EventType, unknown>> {\n\tall: EventHandlerMap<Events>;\n\n\ton<Key extends keyof Events>(type: Key, handler: Handler<Events[Key]>): void;\n\ton(type: '*', handler: WildcardHandler<Events>): void;\n\n\toff<Key extends keyof Events>(type: Key, handler?: Handler<Events[Key]>): void;\n\toff(type: '*', handler: WildcardHandler<Events>): void;\n\n\temit<Key extends keyof Events>(type: Key, event: Events[Key]): void;\n\temit<Key extends keyof Events>(type: undefined extends Events[Key] ? Key : never): void;\n}\n\n/**\n * Mitt: Tiny (~200b) functional event emitter / pubsub.\n * @name mitt\n * @returns {Mitt}\n */\nexport default function mitt<Events extends Record<EventType, unknown>>(\n\tall?: EventHandlerMap<Events>\n): Emitter<Events> {\n\ttype GenericEventHandler =\n\t\t| Handler<Events[keyof Events]>\n\t\t| WildcardHandler<Events>;\n\tall = all || new Map();\n\n\treturn {\n\n\t\t/**\n\t\t * A Map of event names to registered handler functions.\n\t\t */\n\t\tall,\n\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to listen for, or `'*'` for all events\n\t\t * @param {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton<Key extends keyof Events>(type: Key, handler: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\thandlers.push(handler);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tall!.set(type, [handler] as EventHandlerList<Events[keyof Events]>);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t * If `handler` is omitted, all handlers of the given type are removed.\n\t\t * @param {string|symbol} type Type of event to unregister `handler` from, or `'*'`\n\t\t * @param {Function} [handler] Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff<Key extends keyof Events>(type: Key, handler?: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\tif (handler) {\n\t\t\t\t\thandlers.splice(handlers.indexOf(handler) >>> 0, 1);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tall!.set(type, []);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `'*'` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * Note: Manually firing '*' handlers is not supported.\n\t\t *\n\t\t * @param {string|symbol} type The event type to invoke\n\t\t * @param {Any} [evt] Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit<Key extends keyof Events>(type: Key, evt?: Events[Key]) {\n\t\t\tlet handlers = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as EventHandlerList<Events[keyof Events]>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(evt!);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\thandlers = all!.get('*');\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as WildCardEventHandlerList<Events>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(type, evt!);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n}\n","import mitt from 'mitt';\n\nconst emitter = mitt();\nexport default emitter;\n","<script>\nimport { apiGetSingleProduct, apiAddToCart } from '@/libs/api';\nimport emitter from '@/libs/emitter';\n\nexport default {\n  data() {\n    return {\n      product: [],\n      id: '',\n      qty: 1,\n    };\n  },\n  methods: {\n    // 單一產品\n    getSingleProduct(id) {\n      apiGetSingleProduct(id)\n        .then((response) => {\n          this.product = response.data.product;\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n\n    // 加入購物車\n    addToCart(qty = 1) {\n      const data = {\n        product_id: this.id,\n        qty,\n      };\n\n      apiAddToCart({ data })\n        .then((response) => {\n          console.log('addToCart', response);\n          emitter.emit('get-cart');\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n  },\n  mounted() {\n    this.id = this.$route.params.id;\n    this.getSingleProduct(this.id);\n  },\n};\n</script>\n\n<template>\n  <div class=\"container\">\n    <div\n      style=\"min-height: 400px;\n            background-position: center center; background-size: cover;\"\n      :style=\"{backgroundImage: `url(${product.imageUrl})`}\"\n    >\n    </div>\n    <div class=\"row justify-content-between mt-4 mb-7\">\n      <div class=\"col-md-7\">\n        <h2 class=\"mb-0\">{{ product.title }}</h2>\n        <p class=\"fw-bold\">NT$ {{ product.price }}</p>\n        <p>{{ product.content }}</p>\n        <div class=\"my-4\">\n          <img\n            v-for=\"image in product.imagesUrl\"\n            :key=\"image\"\n            :src=\"image\"\n            :alt=\"product.title\"\n            class=\"img-fluid mt-4\"\n          >\n        </div>\n        <div\n          id=\"accordionExample\"\n          class=\"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3\"\n        >\n          <div class=\"card border-0\">\n            <div\n              id=\"headingOne\"\n              class=\"card-header py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#collapseOne\"\n            >\n              <div class=\"d-flex justify-content-between align-items-center pe-1\">\n                <h4 class=\"mb-0\">\n                  Lorem ipsum\n                </h4>\n                <i class=\"fas fa-minus\"></i>\n              </div>\n            </div>\n            <div\n              id=\"collapseOne\"\n              class=\"collapse show\"\n              aria-labelledby=\"headingOne\"\n              data-bs-parent=\"#accordionExample\"\n            >\n              <div class=\"card-body pb-5\">\n                Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam\n                nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam\n                erat, sed diam voluptua. At vero eos et accusam et justo duo dolores\n                et ea\n              </div>\n            </div>\n          </div>\n          <div class=\"card border-0\">\n            <div\n              id=\"headingTwo\"\n              class=\"card-header py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#collapseTwo\"\n            >\n              <div class=\"d-flex justify-content-between align-items-center pe-1\">\n                <h4 class=\"mb-0\">\n                  Lorem ipsum\n                </h4>\n                <i class=\"fas fa-plus\"></i>\n              </div>\n            </div>\n            <div\n              id=\"collapseTwo\"\n              class=\"collapse\"\n              aria-labelledby=\"headingTwo\"\n              data-bs-parent=\"#accordionExample\"\n            >\n              <div class=\"card-body pb-5\">\n                Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam\n                nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam\n                erat, sed diam voluptua. At vero eos et accusam et justo duo dolores\n                et ea\n              </div>\n            </div>\n          </div>\n          <div class=\"card border-0\">\n            <div\n              id=\"headingThree\"\n              class=\"card-header py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0\"\n              data-bs-toggle=\"collapse\"\n              data-bs-target=\"#collapseThree\"\n            >\n              <div class=\"d-flex justify-content-between align-items-center pe-1\">\n                <h4 class=\"mb-0\">\n                  Lorem ipsum\n                </h4>\n                <i class=\"fas fa-plus\"></i>\n              </div>\n            </div>\n            <div\n              id=\"collapseThree\"\n              class=\"collapse\"\n              aria-labelledby=\"headingThree\"\n              data-bs-parent=\"#accordionExample\"\n            >\n              <div class=\"card-body pb-5\">\n                Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam\n                nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam\n                erat, sed diam voluptua. At vero eos et accusam et justo duo dolores\n                et ea\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-4\">\n        <div class=\"input-group mb-3 border mt-3\">\n          <div class=\"input-group-prepend\">\n            <button\n              id=\"button-addon1\"\n              class=\"btn btn-outline-dark rounded-0 border-0 py-3\"\n              type=\"button\"\n            >\n              <i class=\"fas fa-minus\"></i>\n            </button>\n          </div>\n          <input\n            type=\"text\"\n            class=\"form-control border-0 text-center my-auto shadow-none\"\n            placeholder=\"\"\n            aria-label=\"Example text with button addon\"\n            aria-describedby=\"button-addon1\"\n            value=\"1\"\n          >\n          <div class=\"input-group-append\">\n            <button\n              id=\"button-addon2\"\n              class=\"btn btn-outline-dark rounded-0 border-0 py-3\"\n              type=\"button\"\n            >\n\n              <i class=\"fas fa-plus\"></i>\n            </button>\n          </div>\n        </div>\n        <button\n          class=\"btn btn-dark btn-block rounded-0 py-3\"\n          @click.prevent=\"addToCart()\"\n        >Lorem\n          ipsum</button>\n      </div>\n    </div>\n  </div>\n</template>\n","import { render } from \"./ProductView.vue?vue&type=template&id=4623bb56\"\nimport script from \"./ProductView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/var/www/html/week8demo/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["api","process","path","apiGetAllProducts","axios","apiGetSingleProduct","id","apiGetCart","apiAddToCart","data","all","Map","on","type","handler","handlers","get","push","set","off","splice","indexOf","emit","evt","slice","map","emitter","mitt","class","_createElementBlock","_createElementVNode","style","backgroundImage","$data","imageUrl","_toDisplayString","title","price","content","_Fragment","_renderList","imagesUrl","image","key","src","alt","_hoisted_8","_hoisted_10","onClick","$options","product","qty","methods","getSingleProduct","then","response","this","catch","error","console","log","addToCart","product_id","mounted","$route","params","__exports__","render"],"sourceRoot":""}